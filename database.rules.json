{
  "rules": {
    "system-common": {
      "options": {
        "state": {
          "$key1": {
            ".validate": "newData.hasChildren()"
          },
          ".validate": "newData.hasChildren()",
          ".read": "true",
          ".write": "auth != null"
        }
      }
    },
    "users": {
      "$uid": {
        "leads": {
          "$key1": {
            ".validate": "newData.hasChildren()"
          },
          ".validate": "newData.hasChildren()",
          ".read": "auth != null && auth.uid == $uid",
          ".write": "auth != null && auth.uid == $uid"
        }
      }
    },
    "acl": {
      "ui": {
        "view-close-events": {
          "$uid": {
            ".validate": "newData.isBoolean()",
            ".read": "auth != null"
          }
        }
      },
      "groups": {
        "admin": {
          "$uid": {
            ".validate": "newData.isBoolean()",
            ".read": "auth != null"
          }
        }
      }
    },
    "close-events": {
      "options": {
        "final-report-status": {
          "$key2": {
            ".validate": "newData.hasChildren(['name']) && $key2 == newData.child('name').val()",
            "name": {
              ".validate": "newData.isString()"
            },
            "description": {
              ".validate": "newData.isString()"
            },
            "$other": {
              ".validate": "false"
            }
          },
          ".validate": "newData.hasChildren()",
          ".read": "true",
          ".write": "auth != null"
        },
        "debrief-status": {
          "$key2": {
            ".validate": "newData.hasChildren(['name']) && $key2 == newData.child('name').val()",
            "name": {
              ".validate": "newData.isString()"
            },
            "description": {
              ".validate": "newData.isString()"
            },
            "$other": {
              ".validate": "false"
            }
          },
          ".validate": "newData.hasChildren()",
          ".read": "true",
          ".write": "auth != null"
        },
        "payment-status": {
          "$key2": {
            ".validate": "newData.hasChildren(['name']) && $key2 == newData.child('name').val()",
            "name": {
              ".validate": "newData.isString()"
            },
            "description": {
              ".validate": "newData.isString()"
            },
            "$other": {
              ".validate": "false"
            }
          },
          ".validate": "newData.hasChildren()",
          ".read": "true",
          ".write": "auth != null"
        }
      },
      "journaled-integration": {
        ".validate": "newData.hasChildren()"
      },
      "debriefs": {
        "$key3": {
          ".validate": "data.hasChildren(['title', 'venue', 'date', 'time', 'holeInsurance', 'holeSponsorship', 'driverCost', 'putterCost', 'shaftCost', 'miscExpenses', 'waiveMiscExpenses', 'waiveTravelExpenses', 'waiveCcFee', 'charityPercentage', 'debriefStatus']) || newData.hasChildren(['title', 'venue', 'date', 'time', 'holeInsurance', 'holeSponsorship', 'driverCost', 'putterCost', 'shaftCost', 'miscExpenses', 'waiveMiscExpenses', 'waiveTravelExpenses', 'waiveCcFee', 'charityPercentage', 'debriefStatus'])",
          "cgiCc": {
            ".validate": "newData.isNumber()"
          },
          "cgiCash": {
            ".validate": "newData.isNumber()"
          },
          "cgiChecks": {
            ".validate": "newData.isNumber()"
          },
          "cgiChecksDetails": {
            ".validate": "newData.isString()"
          },
          "cgiOther": {
            ".validate": "newData.isNumber()"
          },
          "cgiOtherDetails": {
            ".validate": "newData.isString()"
          },
          "charityCc": {
            ".validate": "newData.isNumber()"
          },
          "charityCash": {
            ".validate": "newData.isNumber()"
          },
          "charityChecks": {
            ".validate": "newData.isNumber()"
          },
          "charityChecksDetails": {
            ".validate": "newData.isString()"
          },
          "charityOther": {
            ".validate": "newData.isNumber()"
          },
          "charityOtherDetails": {
            ".validate": "newData.isString()"
          },
          "expenses": {
            ".validate": "newData.isNumber()"
          },
          "expensesDetails": {
            ".validate": "newData.isString()"
          },
          "giveAwayDetails": {
            ".validate": "newData.isString()"
          },
          "shafts": {
            ".validate": "newData.isNumber()"
          },
          "drivers": {
            ".validate": "newData.isNumber()"
          },
          "putters": {
            ".validate": "newData.isNumber()"
          },
          "players": {
            ".validate": "newData.isNumber()"
          },
          "notes": {
            ".validate": "newData.isString()"
          },
          "ratingNps": {
            ".validate": "newData.isNumber()"
          },
          "ratingAttendence": {
            ".validate": "newData.isNumber()"
          },
          "ratingCharityCooperation": {
            ".validate": "newData.isNumber()"
          },
          "ratingPatronCooperation": {
            ".validate": "newData.isNumber()"
          },
          "isHitterDebriefCompleted": {
            ".validate": "newData.isBoolean()"
          },
          "title": {
            ".validate": "newData.isString()"
          },
          "venue": {
            ".validate": "newData.isString()"
          },
          "date": {
            ".validate": "newData.isNumber()"
          },
          "time": {
            ".validate": "newData.isString()"
          },
          "hitters": {
            "$key4": {
              ".validate": "newData.hasChildren(['sqlId', 'name', 'email', 'debriefHash', 'hitterPercentage'])",
              "sqlId": {
                ".validate": "newData.isNumber()"
              },
              "name": {
                ".validate": "newData.isString()"
              },
              "email": {
                ".validate": "newData.isString()"
              },
              "debriefHash": {
                ".validate": "newData.isString()"
              },
              "hitterPercentage": {
                ".validate": "newData.isNumber()"
              },
              "sentHitterFinalReports": {
                "$key5": {
                  ".validate": "newData.isNumber()"
                },
                ".validate": "newData.hasChildren()"
              },
              "$other": {
                ".validate": "false"
              }
            },
            ".validate": "newData.hasChildren()"
          },
          "charityContacts": {
            "$key6": {
              ".validate": "newData.hasChildren(['sqlId'])",
              "sqlId": {
                ".validate": "newData.isNumber()"
              },
              "name": {
                ".validate": "newData.isString()"
              },
              "email": {
                ".validate": "newData.isString()"
              },
              "emailAlt": {
                ".validate": "newData.isString()"
              },
              "phone": {
                ".validate": "newData.isString()"
              },
              "phoneAlt": {
                ".validate": "newData.isString()"
              },
              "$other": {
                ".validate": "false"
              }
            },
            ".validate": "newData.hasChildren()"
          },
          "$other": {
            ".validate": "false"
          },
          "holeInsurance": {
            ".validate": "newData.isNumber()"
          },
          "holeSponsorship": {
            ".validate": "newData.isNumber()"
          },
          "driverCost": {
            ".validate": "newData.isNumber()"
          },
          "putterCost": {
            ".validate": "newData.isNumber()"
          },
          "shaftCost": {
            ".validate": "newData.isNumber()"
          },
          "miscExpenses": {
            ".validate": "newData.isNumber()"
          },
          "waiveMiscExpenses": {
            ".validate": "newData.isBoolean()"
          },
          "waiveTravelExpenses": {
            ".validate": "newData.isBoolean()"
          },
          "waiveCcFee": {
            ".validate": "newData.isBoolean()"
          },
          "charityPercentage": {
            ".validate": "newData.isNumber()"
          },
          "miscExpenseDetails": {
            ".validate": "newData.isString()"
          },
          "bookKeeperInstructions": {
            ".validate": "newData.isString()"
          },
          "fixed": {
            ".validate": "newData.isNumber()"
          },
          "debriefStatus": {
            ".validate": "newData.isString() && newData.parent().parent().parent().parent().child('close-events').child('options').child('debrief-status').child(newData.val()).val() != null"
          },
          "finalReportStatus": {
            ".validate": "newData.isString() && newData.parent().parent().parent().parent().child('close-events').child('options').child('final-report-status').child(newData.val()).val() != null"
          },
          "paymentStatus": {
            ".validate": "newData.isString() && newData.parent().parent().parent().parent().child('close-events').child('options').child('payment-status').child(newData.val()).val() != null"
          },
          "sentCharityFinalReports": {
            "$key5": {
              ".validate": "newData.isNumber()"
            },
            ".validate": "newData.hasChildren()"
          },
          "isCharitySurveySent": {
            ".validate": "newData.isBoolean()"
          },
          "ratingNpsByCharity": {
            ".validate": "newData.isNumber()"
          }
        },
        ".validate": "newData.hasChildren()",
        ".read": "auth != null",
        ".write": "auth != null"
      },
      "surveys": {
        "$key7": {
          ".validate": "newData.hasChildren(['secret'])",
          "ratingNps": {
            ".validate": "newData.isNumber()"
          },
          "ratingReason": {
            ".validate": "newData.isString()"
          },
          "players": {
            ".validate": "newData.isNumber()"
          },
          "isCompletedDate": {
            ".validate": "newData.isNumber()"
          },
          "hitters": {
            "$key8": {
              ".validate": "newData.hasChildren(['sqlId', 'name'])",
              "sqlId": {
                ".validate": "newData.isNumber()"
              },
              "name": {
                ".validate": "newData.isString()"
              },
              "ratingCommunication": {
                ".validate": "newData.isNumber()"
              },
              "ratingCooperation": {
                ".validate": "newData.isNumber()"
              },
              "ratingAdherenceToSchedule": {
                ".validate": "newData.isNumber()"
              },
              "ratingSkills": {
                ".validate": "newData.isNumber()"
              },
              "notes": {
                ".validate": "newData.isString()"
              },
              "$other": {
                ".validate": "false"
              }
            },
            ".validate": "newData.hasChildren()"
          },
          "secret": {
            ".validate": "newData.isString()"
          },
          "dateCreated": {
            ".validate": "newData.isNumber()"
          },
          "$other": {
            ".validate": "false"
          }
        },
        ".validate": "newData.hasChildren()",
        ".read": "true",
        ".write": "auth != null || data.val() == null || data.val() != null && newData.val() != null && !(auth != null) && data.child('isCompletedDate').val() == null"
      },
      "events": {
        "$eventId": {
          "hitters": {
            "$hitterEmailHashKey": {
              ".validate": "newData.hasChildren(['title', 'venue', 'date', 'time'])",
              "cgiCc": {
                ".validate": "newData.isNumber()"
              },
              "cgiCash": {
                ".validate": "newData.isNumber()"
              },
              "cgiChecks": {
                ".validate": "newData.isNumber()"
              },
              "cgiChecksDetails": {
                ".validate": "newData.isString()"
              },
              "cgiOther": {
                ".validate": "newData.isNumber()"
              },
              "cgiOtherDetails": {
                ".validate": "newData.isString()"
              },
              "charityCc": {
                ".validate": "newData.isNumber()"
              },
              "charityCash": {
                ".validate": "newData.isNumber()"
              },
              "charityChecks": {
                ".validate": "newData.isNumber()"
              },
              "charityChecksDetails": {
                ".validate": "newData.isString()"
              },
              "charityOther": {
                ".validate": "newData.isNumber()"
              },
              "charityOtherDetails": {
                ".validate": "newData.isString()"
              },
              "expenses": {
                ".validate": "newData.isNumber()"
              },
              "expensesDetails": {
                ".validate": "newData.isString()"
              },
              "giveAwayDetails": {
                ".validate": "newData.isString()"
              },
              "shafts": {
                ".validate": "newData.isNumber()"
              },
              "drivers": {
                ".validate": "newData.isNumber()"
              },
              "putters": {
                ".validate": "newData.isNumber()"
              },
              "players": {
                ".validate": "newData.isNumber()"
              },
              "notes": {
                ".validate": "newData.isString()"
              },
              "ratingNps": {
                ".validate": "newData.isNumber()"
              },
              "ratingAttendence": {
                ".validate": "newData.isNumber()"
              },
              "ratingCharityCooperation": {
                ".validate": "newData.isNumber()"
              },
              "ratingPatronCooperation": {
                ".validate": "newData.isNumber()"
              },
              "isHitterDebriefCompleted": {
                ".validate": "newData.isBoolean()"
              },
              "title": {
                ".validate": "newData.isString()"
              },
              "venue": {
                ".validate": "newData.isString()"
              },
              "date": {
                ".validate": "newData.isNumber()"
              },
              "time": {
                ".validate": "newData.isString()"
              },
              "hitters": {
                "$key4": {
                  ".validate": "newData.hasChildren(['sqlId', 'name', 'email', 'debriefHash', 'hitterPercentage'])",
                  "sqlId": {
                    ".validate": "newData.isNumber()"
                  },
                  "name": {
                    ".validate": "newData.isString()"
                  },
                  "email": {
                    ".validate": "newData.isString()"
                  },
                  "debriefHash": {
                    ".validate": "newData.isString()"
                  },
                  "hitterPercentage": {
                    ".validate": "newData.isNumber()"
                  },
                  "sentHitterFinalReports": {
                    "$key5": {
                      ".validate": "newData.isNumber()"
                    },
                    ".validate": "newData.hasChildren()"
                  },
                  "$other": {
                    ".validate": "false"
                  }
                },
                ".validate": "newData.hasChildren()"
              },
              "charityContacts": {
                "$key6": {
                  ".validate": "newData.hasChildren(['sqlId'])",
                  "sqlId": {
                    ".validate": "newData.isNumber()"
                  },
                  "name": {
                    ".validate": "newData.isString()"
                  },
                  "email": {
                    ".validate": "newData.isString()"
                  },
                  "emailAlt": {
                    ".validate": "newData.isString()"
                  },
                  "phone": {
                    ".validate": "newData.isString()"
                  },
                  "phoneAlt": {
                    ".validate": "newData.isString()"
                  },
                  "$other": {
                    ".validate": "false"
                  }
                },
                ".validate": "newData.hasChildren()"
              },
              "$other": {
                ".validate": "false"
              },
              ".read": "true",
              ".write": "auth != null || data.val() == null || data.val() != null && newData.val() != null && !(auth != null) && data.child('isHitterDebriefCompleted').val() != true"
            }
          },
          "final-reports": {
            "charity": {
              "$timestamp": {
                ".validate": "newData.hasChildren(['markdown', 'templateVersion'])",
                "to": {
                  ".validate": "newData.isString()"
                },
                "cc": {
                  ".validate": "newData.isString()"
                },
                "bcc": {
                  ".validate": "newData.isString()"
                },
                "subject": {
                  ".validate": "newData.isString()"
                },
                "markdown": {
                  ".validate": "newData.isString()"
                },
                "categories": {
                  "$key9": {
                    ".validate": "newData.isString()"
                  },
                  ".validate": "newData.hasChildren()"
                },
                "templateVersion": {
                  ".validate": "newData.isString()"
                },
                "templateModel": {
                  ".validate": "newData.hasChildren()"
                },
                "templateActionsTaken": {
                  "$key10": {
                    ".validate": "newData.hasChildren() && newData.hasChildren(['action', 'label', 'createdDate'])",
                    "category": {
                      ".validate": "newData.isString()"
                    },
                    "action": {
                      ".validate": "newData.isString()"
                    },
                    "label": {
                      ".validate": "newData.isString()"
                    },
                    "createdDate": {
                      ".validate": "newData.isNumber()"
                    },
                    "$other": {
                      ".validate": "false"
                    },
                    ".write": "data.val() == null"
                  },
                  ".validate": "newData.hasChildren()"
                },
                "createdDate": {
                  ".validate": "newData.isNumber()"
                },
                "$other": {
                  ".validate": "false"
                },
                ".read": "auth != null",
                ".write": "auth != null"
              }
            },
            "hitters": {
              "$hitterId": {
                "$timestamp": {
                  ".validate": "newData.hasChildren(['markdown', 'templateVersion'])",
                  "to": {
                    ".validate": "newData.isString()"
                  },
                  "cc": {
                    ".validate": "newData.isString()"
                  },
                  "bcc": {
                    ".validate": "newData.isString()"
                  },
                  "subject": {
                    ".validate": "newData.isString()"
                  },
                  "markdown": {
                    ".validate": "newData.isString()"
                  },
                  "categories": {
                    "$key9": {
                      ".validate": "newData.isString()"
                    },
                    ".validate": "newData.hasChildren()"
                  },
                  "templateVersion": {
                    ".validate": "newData.isString()"
                  },
                  "templateModel": {
                    ".validate": "newData.hasChildren()"
                  },
                  "templateActionsTaken": {
                    "$key10": {
                      ".validate": "newData.hasChildren() && newData.hasChildren(['action', 'label', 'createdDate'])",
                      "category": {
                        ".validate": "newData.isString()"
                      },
                      "action": {
                        ".validate": "newData.isString()"
                      },
                      "label": {
                        ".validate": "newData.isString()"
                      },
                      "createdDate": {
                        ".validate": "newData.isNumber()"
                      },
                      "$other": {
                        ".validate": "false"
                      },
                      ".write": "data.val() == null"
                    },
                    ".validate": "newData.hasChildren()"
                  },
                  "createdDate": {
                    ".validate": "newData.isNumber()"
                  },
                  "$other": {
                    ".validate": "false"
                  },
                  ".read": "auth != null",
                  ".write": "auth != null"
                }
              }
            }
          }
        }
      }
    },
    "queues": {
      "newsletter": {
        "monthly": {
          "tasks": {
            "$key11": {
              ".validate": "newData.hasChildren(['markdown', 'templateVersion'])",
              "to": {
                ".validate": "newData.isString()"
              },
              "cc": {
                ".validate": "newData.isString()"
              },
              "bcc": {
                ".validate": "newData.isString()"
              },
              "subject": {
                ".validate": "newData.isString()"
              },
              "markdown": {
                ".validate": "newData.isString()"
              },
              "categories": {
                "$key9": {
                  ".validate": "newData.isString()"
                },
                ".validate": "newData.hasChildren()"
              },
              "templateVersion": {
                ".validate": "newData.isString()"
              },
              "templateModel": {
                ".validate": "newData.hasChildren()"
              },
              "templateActionsTaken": {
                "$key10": {
                  ".validate": "newData.hasChildren() && newData.hasChildren(['action', 'label', 'createdDate'])",
                  "category": {
                    ".validate": "newData.isString()"
                  },
                  "action": {
                    ".validate": "newData.isString()"
                  },
                  "label": {
                    ".validate": "newData.isString()"
                  },
                  "createdDate": {
                    ".validate": "newData.isNumber()"
                  },
                  "$other": {
                    ".validate": "false"
                  },
                  ".write": "data.val() == null"
                },
                ".validate": "newData.hasChildren()"
              },
              "createdDate": {
                ".validate": "newData.isNumber()"
              },
              "$other": {
                ".validate": "auth != null && auth.uid == 'newsletter-worker'"
              }
            },
            ".validate": "newData.hasChildren()",
            ".indexOn": [
              "_state"
            ]
          },
          ".read": "auth != null && auth.uid == 'newsletter-worker'",
          ".write": "auth != null && auth.uid == 'newsletter-worker'"
        }
      }
    }
  }
}
